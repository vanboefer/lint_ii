<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LiNT-II | Demo</title>
    <script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-lite@5"></script>
    <script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs/prism.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/prismjs/plugins/autoloader/prism-autoloader.min.js"></script>
    <script async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script type="module" src="https://lcvriend.github.io/wc-darkmode-toggle/src/darkmode-toggle.js"></script>
    <link rel="stylesheet" href="https://latex.vercel.app/prism/prism.css">
    <link rel="stylesheet" href="https://latex.vercel.app/style.css">
    <style>
        html, body {
            max-width: 900px !important;
            margin-inline: auto;
        }
        body {
            --max-content-width: 80ch;

            lint-ii-visualizer {
                --background: hsl(12, 50%, 97%);
                margin-block: 2.5rem;
            }
            &:has(darkmode-toggle[scheme="dark"]) {
                lint-ii-visualizer {
                    --background: hsl(12, 50%, 7%);
                }
            }
        }
        darkmode-toggle {
            position: absolute;
            right: 1em;
            top: 0;
            font-size: 1.5rem;
        }
        header, footer, section {
            display: grid;
            grid-template-columns:
                minmax(1rem, 1fr) [breakout-start]
                minmax(0, auto) [content-start]
                min(var(--max-content-width), calc(100% - 2rem))
                [content-end] minmax(0, auto)
                [breakout-end] minmax(1rem, 1fr);

            & > * {
                grid-column: content;
            }
            & > .breakout {
                grid-column: breakout;
                overflow-x: auto;
            }
        }
    </style>
</head>
<body>
    <darkmode-toggle></darkmode-toggle>
    <header>
        <h1>LiNT-II: readability assessment for Dutch</h1>
        <p class="author">Jenia Kim</p>
    </header>
    <section>
        <p>
            <strong>LiNT-II</strong> analyzes Dutch text readability using four linguistic features: word frequency, concrete vs abstract nouns, syntactic dependency length, and content words per clause. Each sentence receives a difficulty score from 1 (easy) to 4 (difficult). The score is calculated as follows:
        </p>
        <p>
            \[
            \begin{aligned}
            \text{score} &= 3.204 + 15.845 \cdot \overline{f}_{\text{zipf}} - 1.331 \cdot \text{SDL}_{\max} \\
            &\quad - 3.829 \cdot \frac{n_{\text{content}}}{n_{\text{clauses}}} + 13.096 \cdot \frac{n_{\text{concrete}}}{n_{\text{concrete}} + n_{\text{abstract}}} \\[1em]
            \text{LiNT} &= \min\left(100, \max(0, 100 - \text{score})\right)
            \end{aligned}
            \]
        </p>
        <p>
            Try the interactive visualization below to explore sentence-level analysis. Hover over words to see their linguistic features, or click Î£ to view document statistics.
        </p>
    </section>
    <section>
        <h2>Demo</h2>
        <p>Pick a CEFR level:</p>
        <div style="margin-bottom: 1.5rem;">
            <label><input type="radio" name="cefr" value="A2" checked> A2</label>
            <label><input type="radio" name="cefr" value="B1"> B1</label>
            <label><input type="radio" name="cefr" value="B2"> B2</label>
            <label><input type="radio" name="cefr" value="C2"> C2</label>
        </div>
        <lint-ii-visualizer id="viz" class="breakout"></lint-ii-visualizer>
    </section>
    <section>
    <h2>Installation</h2>
    <pre><code class="language-bash">    pip install lint-ii
    python -m spacy download nl_core_news_sm</code></pre>
    </section>
    <section>
        <h2>Usage</h2>
        <pre><code class="language-python">    from lint_ii import ReadabilityAnalysis

    doc = ReadabilityAnalysis.from_text("Uw Nederlandse tekst hier")
    print(doc.lint_scores_per_sentence)</code></pre>
    </section>
    <footer>
        <a href="https://github.com/vanboefer/lint_ii">github.com/vanboefer/lint_ii</a>
    </footer>
    <script type="module" src="./src/visualizer/lint_ii_visualizer.js"></script>
    <script type="module">
        const viz = document.getElementById('viz')
        const radios = document.querySelectorAll('input[name="cefr"]')
        
        const loadLevel = (level) => {
            viz.loadFromUrl(`./data/${level}.json`)
        }
        
        radios.forEach(radio => {
            radio.addEventListener('change', (e) => {
                if (e.target.checked) loadLevel(e.target.value)
            })
        })
        
        // Initialize with checked radio
        const checked = document.querySelector('input[name="cefr"]:checked')
        if (checked) loadLevel(checked.value)
    </script>
    <script>
        document.addEventListener("color-scheme-change", event => {
            event.detail.scheme === "dark"
            ? document.body.classList.add("latex-dark")
            : document.body.classList.remove("latex-dark")

            const viz = document.getElementById('viz')
            const statsContainer = viz.shadowRoot?.querySelector('[data-view="stats"]')
            if (statsContainer && statsContainer.children.length > 0) {
                viz.renderStats()
            }
        })
    </script>
</body>
</html>